<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <changeSet id="MALAWI_CONFIG_202020031133" author="Sreekalyan">
        <comment>Adding Concepts for IAA Form</comment>
        <sqlFile path="openmrs/data/configuration/liquibase/IAA/IAA.sql"/>
    </changeSet>


    <changeSet id="MALAWI_CONFIG_2020032012462" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select
                count(*)
                From
                concept_reference_term
                where `code` in
                ("1633","1107","126371","121375","141342","156639","156659","156649","158320","119481","158322","120066","155","112830","156664","5986","161181","163583","156625","151286","5622",
                "143050","156221","160327","160328","160329","160330","160331","160332")
                and retired = 0
                and concept_source_id = (
                select concept_source_id from concept_reference_source where name = "CEIL" and retired =0
                );
            </sqlCheck>
        </preConditions>

        <comment>Adding codes to CEIL</comment>

        <sql>

            SELECT concept_source_id INTO @source_id FROM concept_reference_source where name = "CEIL"
            and retired =0;

            call CREATE_REFERENCE_MAPPING_CEIL("IAA, Date of Consultation","162869");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"1633",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("IAA, Past medical history","1633");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"1107",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("None","1107");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"126371",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Sleep apnoea","126371");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"121375",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Asthma","121375");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"141342",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Emphysema","141342");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"156639",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Hypertension","156639");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"156659",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Rheumatic fever","156659");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"156649",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("MI","156649");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"158320",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Renal stones","158320");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"119481",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Diabetes","119481");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"158322",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Corticosteroid drugs","158322");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"120066",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Congenital disorders of the nervous system","120066");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"155",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Epilepsy or seizure","155");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"112830",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Spinal cord disease","112830");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"156664",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Upper GI bleeding","156664");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"5986",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Jaundice","5986");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"161181",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Cirrhosis","161181");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"163583",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Blood disorder","163583");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"156625",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Anaemia","156625");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"151286",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Cancer","151286");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"5622",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Other","5622");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"161914",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Local","161914");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"143050",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Suffocation or cyanosis","143050");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"156221",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Difficult intubation","156221");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"160327",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("ASA I","160327");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"160328",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("ASA II","160328");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"160329",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("ASA III","160329");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"160330",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("ASA IV","160330");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"160331",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("ASA V","160331");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"160332",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("ASA VI","160332");
            call CREATE_REFERENCE_MAPPING_CEIL("LOA","161914");
            call CREATE_REFERENCE_MAPPING_CEIL("General","161909");
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES
            (4,"1067",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("Unknown","1067");

        </sql>

    </changeSet>

    <changeSet id="Malawi_CONFIG_2020032016074" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("None","Congenital lung disease","Cough or cold","Sleep apnoea","Asthma","Emphysema","Congenital heart
                disease","Hypertension","Rheumatic fever","Valve disease","MI","Palpitations","Heart
                problems","Congenital renal disease","Renal
                infection","Renal stones","Renal failure","Diabetes","Thyroid hormone
                diseases","Corticosteroid drugs","Congenital disorders of the nervous system","Epilepsy or
                seizure","CVA - TIA","Spinal cord disease","Upper GI bleeding","
                Jaundice","Cirrhosis","Hepatitis","Blood disorder","Anaemia","Frequent bleeding","Abnormal blood
                clotting","Cancer","Other")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, Past medical history");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to Past medical history</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, Past medical history" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            set @child6_concept_id = 0;
            set @child7_concept_id = 0;
            set @child8_concept_id = 0;
            set @child9_concept_id = 0;
            set @child10_concept_id = 0;
            set @child11_concept_id = 0;
            set @child12_concept_id = 0;
            set @child13_concept_id = 0;
            set @child14_concept_id = 0;
            set @child15_concept_id = 0;
            set @child16_concept_id = 0;
            set @child17_concept_id = 0;
            set @child18_concept_id = 0;
            set @child19_concept_id = 0;
            set @child20_concept_id = 0;
            set @child21_concept_id = 0;
            set @child22_concept_id = 0;
            set @child23_concept_id = 0;
            set @child24_concept_id = 0;
            set @child25_concept_id = 0;
            set @child26_concept_id = 0;
            set @child27_concept_id = 0;
            set @child28_concept_id = 0;
            set @child29_concept_id = 0;
            set @child30_concept_id = 0;
            set @child31_concept_id = 0;
            set @child32_concept_id = 0;
            set @child33_concept_id = 0;
            set @child34_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="None" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Congenital lung disease" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Cough or cold (present time)" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="Sleep apnoea" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="Asthma" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child6_concept_id from concept_name where name ="Emphysema" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child7_concept_id from concept_name where name ="Congenital heart disease" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child8_concept_id from concept_name where name ="Hypertension" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child9_concept_id from concept_name where name ="Rheumatic fever" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child10_concept_id from concept_name where name ="Valve disease" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child11_concept_id from concept_name where name ="MI" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child12_concept_id from concept_name where name ="Palpitations" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child13_concept_id from concept_name where name ="Heart problems (within last six months)" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child14_concept_id from concept_name where name ="Congenital renal disease" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child15_concept_id from concept_name where name ="Renal infection" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child16_concept_id from concept_name where name ="Renal stones" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child17_concept_id from concept_name where name ="Renal failure" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child18_concept_id from concept_name where name ="Diabetes" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child19_concept_id from concept_name where name ="Thyroid hormone diseases" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child20_concept_id from concept_name where name ="Corticosteroid drugs" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child21_concept_id from concept_name where name ="Congenital disorders of the nervous system" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child22_concept_id from concept_name where name ="Epilepsy or seizure" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child23_concept_id from concept_name where name ="CVA - TIA" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child24_concept_id from concept_name where name ="Spinal cord disease" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child25_concept_id from concept_name where name ="Upper GI bleeding" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child26_concept_id from concept_name where name ="Jaundice" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child27_concept_id from concept_name where name ="Cirrhosis" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child28_concept_id from concept_name where name ="Hepatitis" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child29_concept_id from concept_name where name ="Blood disorder" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child30_concept_id from concept_name where name ="Anaemia" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child31_concept_id from concept_name where name ="Frequent bleeding" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child32_concept_id from concept_name where name ="Abnormal blood clotting" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child33_concept_id from concept_name where name ="Cancer" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child34_concept_id from concept_name where name ="Other" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
            call add_concept_answer(@concept_id, @child6_concept_id, 6);
            call add_concept_answer(@concept_id, @child7_concept_id, 7);
            call add_concept_answer(@concept_id, @child8_concept_id, 8);
            call add_concept_answer(@concept_id, @child9_concept_id, 9);
            call add_concept_answer(@concept_id, @child10_concept_id, 10);
            call add_concept_answer(@concept_id, @child11_concept_id, 11);
            call add_concept_answer(@concept_id, @child12_concept_id, 12);
            call add_concept_answer(@concept_id, @child13_concept_id, 13);
            call add_concept_answer(@concept_id, @child14_concept_id, 14);
            call add_concept_answer(@concept_id, @child15_concept_id, 15);
            call add_concept_answer(@concept_id, @child16_concept_id, 16);
            call add_concept_answer(@concept_id, @child17_concept_id, 17);
            call add_concept_answer(@concept_id, @child18_concept_id, 18);
            call add_concept_answer(@concept_id, @child19_concept_id, 19);
            call add_concept_answer(@concept_id, @child20_concept_id, 20);
            call add_concept_answer(@concept_id, @child21_concept_id, 21);
            call add_concept_answer(@concept_id, @child22_concept_id, 22);
            call add_concept_answer(@concept_id, @child23_concept_id, 23);
            call add_concept_answer(@concept_id, @child24_concept_id, 24);
            call add_concept_answer(@concept_id, @child25_concept_id, 25);
            call add_concept_answer(@concept_id, @child26_concept_id, 26);
            call add_concept_answer(@concept_id, @child27_concept_id, 27);
            call add_concept_answer(@concept_id, @child28_concept_id, 28);
            call add_concept_answer(@concept_id, @child29_concept_id, 29);
            call add_concept_answer(@concept_id, @child30_concept_id, 30);
            call add_concept_answer(@concept_id, @child31_concept_id, 31);
            call add_concept_answer(@concept_id, @child32_concept_id, 32);
            call add_concept_answer(@concept_id, @child33_concept_id, 33);
            call add_concept_answer(@concept_id, @child34_concept_id, 34);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_2020032016080" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Yes","No","Unknown")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, Is the patient allergic to any
                drugs/medications?");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to Is the patient allergic to any drugs/medications?</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, Is the patient allergic to any drugs/medications?" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Yes" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="No" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Unknown" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_2020032309198" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Class I","Class II","Class III","Class IV")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, Mallampati Class");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to Mallampati Class</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, Mallampati Class" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Class I" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Class II" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Class III" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="Class IV" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_2020032309200" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("ASA I","ASA II","ASA III","ASA IV","ASA V","ASA VI")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, ASA Score");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to ASA Score</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, ASA Score" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            set @child6_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="ASA I" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="ASA II" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="ASA III" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="ASA IV" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="ASA V" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child6_concept_id from concept_name where name ="ASA VI" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
            call add_concept_answer(@concept_id, @child6_concept_id, 6);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_2020032309211" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("GAI","GAO","GAL","RSA","RPX","RTA","RAO","SED","INF","LOA")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, Planned Anaesthesia technique");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to Planned Anaesthesia technique</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, Planned Anaesthesia technique" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            set @child6_concept_id = 0;
            set @child7_concept_id = 0;
            set @child8_concept_id = 0;
            set @child9_concept_id = 0;
            set @child10_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="GAI" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="GAO" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="GAL" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="RSA" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="RPX" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child6_concept_id from concept_name where name ="RTA" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child7_concept_id from concept_name where name ="RAO" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child8_concept_id from concept_name where name ="SED" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child9_concept_id from concept_name where name ="INF" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child10_concept_id from concept_name where name ="LOA" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
            call add_concept_answer(@concept_id, @child6_concept_id, 6);
            call add_concept_answer(@concept_id, @child7_concept_id, 7);
            call add_concept_answer(@concept_id, @child8_concept_id, 8);
            call add_concept_answer(@concept_id, @child9_concept_id, 9);
            call add_concept_answer(@concept_id, @child10_concept_id, 10);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_2020032309227" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Ready for surgery","Postpone surgery","Unfit for surgery - cancellation")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, Outcome of initial anaesthesia
                assessment");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to Outcome of initial anaesthesia assessment</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, Outcome of initial anaesthesia assessment" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Ready for surgery" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Postpone surgery" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Unfit for surgery - cancellation"
            and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_2020032309234" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Yes","No")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, I discussed the risks and benefits of anaesthesia and answered all questions");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to I discussed the risks and benefits of anaesthesia and answered all questions
        </comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, I discussed the risks and benefits of anaesthesia and answered all questions" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Yes" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="No" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_2020032017504" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("None","Admission to ICU","Suffocation or cyanosis","Difficult intubation","Delayed recovery","Other")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, Adverse reaction to anaesthesia");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to Adverse reaction to anaesthesia</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, Adverse reaction to anaesthesia" and concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;

            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            set @child6_concept_id = 0;

            select concept_id into @child1_concept_id from concept_name where name ="None" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Admission to ICU" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Suffocation or cyanosis" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="Difficult intubation" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="Delayed recovery" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child6_concept_id from concept_name where name ="Other" and concept_name_type = 'FULLY_SPECIFIED' and locale = 'en' and voided = 0;

            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
            call add_concept_answer(@concept_id, @child6_concept_id, 6);
        </sql>
    </changeSet>



    <changeSet id="Malawi_CONFIG_2020032016124" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("None","Local","General","Regional")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, Previous Anaesthesia history");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to Previous Anaesthesia history</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, Previous Anaesthesia history" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="None" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Local" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="General" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="Regional" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_2020032309174" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Yes","No","Unknown")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, Personal History of Blood Transfusion");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to Personal History of Blood Transfusion</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, Personal History of Blood Transfusion" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Yes" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="No" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Unknown" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
        </sql>
    </changeSet>


    <changeSet id="Malawi_CONFIG_2020032309187" author="SreeKalyan">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Yes","No","Unknown")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "IAA, Did an incident occur during previous blood transfusion");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to Did an incident occur during previous blood transfusion</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "IAA, Did an incident occur during previous blood transfusion" and
            concept_name_type = 'FULLY_SPECIFIED' and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Yes" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="No" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Unknown" and concept_name_type =
            'FULLY_SPECIFIED' and locale = 'en' and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
        </sql>
    </changeSet>


</databaseChangeLog>
