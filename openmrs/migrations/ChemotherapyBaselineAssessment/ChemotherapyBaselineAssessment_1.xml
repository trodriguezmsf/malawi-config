<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <changeSet id="MALAWI_CONFIG_20221025094421311" author="Shobana, Kiruthiga">
        <comment>Adding Concepts for Chemotherapy baseline assessment form </comment>
        <sqlFile path="ChemotherapyBaselineAssessment/ChemotherapyBaselineAssessment_1.sql"/>
    </changeSet>

    <changeSet id="MALAWI_CONFIG_20221025131527111" author="Shobana, Kiruthiga">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="1">
                select count(*) from concept_reference_term
                where code in
                ("161011")
                and retired = 0
                and concept_source_id = (
		        select concept_source_id from concept_reference_source where name = "CEIL"  
                and retired =0);
            </sqlCheck>
        </preConditions>
        <comment>Adding CEIL codes to concepts</comment>
        <sql>
            SELECT concept_source_id INTO @source_id FROM concept_reference_source where name = "CEIL";
            call CREATE_REFERENCE_MAPPING_CEIL("CBA, Cardiac examination comments","161011");
            call CREATE_REFERENCE_MAPPING_CEIL("CBA, Respiratory system examination comments","161011");
        </sql>
    </changeSet>

</databaseChangeLog>