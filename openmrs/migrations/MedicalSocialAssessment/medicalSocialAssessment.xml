<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <changeSet id="Malawi_CONFIG_20220621022734416" author="Venky">
        <comment>Adding Concepts for medicalSocialAssessment Form</comment>
        <sqlFile path="MedicalSocialAssessment/medicalSocialAssessment.sql"/>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022735380" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("MSF OPD", "Home visit", "Phone call", "Other")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Session location");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Session location</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Session location" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="MSF OPD" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Home visit" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Phone call" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="Other" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022737198" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Patient", "Husband", "Sibling", "Parent", "Child", "Other")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Relationship to head of household");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Relationship to head of household</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Relationship to head of household" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            set @child6_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Patient" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Husband" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Sibling" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="Parent" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="Child" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child6_concept_id from concept_name where name ="Other" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
            call add_concept_answer(@concept_id, @child6_concept_id, 6);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022738833" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Land ownership", "Employee", "Farmer", "Vegetable seller", "Small business owner", "Charcoal seller", "Fisherman", "Other")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Head of household occupation");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Head of household occupation</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Head of household occupation" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            set @child6_concept_id = 0;
            set @child7_concept_id = 0;
            set @child8_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Land ownership" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Employee" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Farmer" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="Vegetable seller" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="Small business owner" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child6_concept_id from concept_name where name ="Charcoal seller" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child7_concept_id from concept_name where name ="Fisherman" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child8_concept_id from concept_name where name ="Other" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
            call add_concept_answer(@concept_id, @child6_concept_id, 6);
            call add_concept_answer(@concept_id, @child7_concept_id, 7);
            call add_concept_answer(@concept_id, @child8_concept_id, 8);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022740309" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Unstable accommodation", "Stable accommodation", "Lives at relatives/friends' place", "On the move", "Homeless", "Institution", "Other")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Patient living condition");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Patient living condition</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Patient living condition" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            set @child6_concept_id = 0;
            set @child7_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Unstable accommodation" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Stable accommodation" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Lives at relatives/friends' place" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="On the move" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="Homeless" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child6_concept_id from concept_name where name ="Institution" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child7_concept_id from concept_name where name ="Other" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
            call add_concept_answer(@concept_id, @child6_concept_id, 6);
            call add_concept_answer(@concept_id, @child7_concept_id, 7);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022741078" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Yes", "No")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Patient owns house");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Patient owns house</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Patient owns house" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Yes" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="No" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022741806" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Yes", "No")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, In the last week, did the patient go an entire day without eating because of lack of food available?");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, In the last week, did the patient go an entire day without eating because of lack of food available?</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, In the last week, did the patient go an entire day without eating because of lack of food available?" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Yes" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="No" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022742932" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("None", "Illiterate", "Primary school", "High school", "College/University")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Patient education level");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Patient education level</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Patient education level" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="None" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Illiterate" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Primary school" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="High school" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="College/University" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022744045" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Yes", "No", "Unknown")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Patient understands their disease");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Patient understands their disease</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Patient understands their disease" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Yes" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="No" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Unknown" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022745116" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Yes", "No", "Unknown")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Guardian understands patient's disease");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Guardian understands patient's disease</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Guardian understands patient's disease" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Yes" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="No" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Unknown" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022746404" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("0= Not at all", "1=Several days", "2=More than half the days", "3=Nearly every day")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Feeling nervous, anxious or on edge");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Feeling nervous, anxious or on edge</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Feeling nervous, anxious or on edge" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="0= Not at all" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="1=Several days" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="2=More than half the days" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="3=Nearly every day" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022747694" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("0= Not at all", "1=Several days", "2=More than half the days", "3=Nearly every day")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Not being able to stop or control worrying");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Not being able to stop or control worrying</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Not being able to stop or control worrying" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="0= Not at all" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="1=Several days" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="2=More than half the days" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="3=Nearly every day" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022749115" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("0= Not at all", "1=Several days", "2=More than half the days", "3=Nearly every day")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Little interest or pleasure in doing things");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Little interest or pleasure in doing things</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Little interest or pleasure in doing things" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="0= Not at all" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="1=Several days" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="2=More than half the days" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="3=Nearly every day" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022750384" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("0= Not at all", "1=Several days", "2=More than half the days", "3=Nearly every day")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Feeling down, depressed, or hopeless");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Feeling down, depressed, or hopeless</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Feeling down, depressed, or hopeless" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="0= Not at all" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="1=Several days" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="2=More than half the days" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="3=Nearly every day" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022751144" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Yes", "No")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Follow-up planned");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Follow-up planned</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Follow-up planned" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Yes" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="No" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022752457" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("OPD", "Phone support", "Home visit", "Unknown", "IPD")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Format of consultation");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Format of consultation</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Format of consultation" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="OPD" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Phone support" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Home visit" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="Unknown" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="IPD" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022754290" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Psychosocial Counselling", "Therapeutic patient education", "Gynaecological consultation", "IPD", "Consultation for palliative care", "Other")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, MSF Referral");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, MSF Referral</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, MSF Referral" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            set @child6_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Psychosocial Counselling" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Therapeutic patient education" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Gynaecological consultation" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="IPD" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="Consultation for palliative care" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child6_concept_id from concept_name where name ="Other" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
            call add_concept_answer(@concept_id, @child6_concept_id, 6);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022755972" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_answer ca
                join
                concept_name cn
                on ca.concept_id = cn.concept_id
                where ca.answer_concept IN (select concept_id from concept_name where name IN
                ("Psychiatric care", "Legal aid", "Sexual and gender based violence (SGBV) services", "Social Welfare NGO", "Other medical facility", "Other")
                and concept_name_type = "FULLY_SPECIFIED")
                AND
                cn.concept_id IN (select concept_id from concept_name where name = "MSA, Referral outside MSF");
            </sqlCheck>
        </preConditions>
        <comment>Adding Answers to MSA, Referral outside MSF</comment>
        <sql>
            select concept_id into @concept_id from concept_name where name = "MSA, Referral outside MSF" and
            concept_name_type = "FULLY_SPECIFIED" and locale = "en" and voided = 0;
            set @child1_concept_id = 0;
            set @child2_concept_id = 0;
            set @child3_concept_id = 0;
            set @child4_concept_id = 0;
            set @child5_concept_id = 0;
            set @child6_concept_id = 0;
            select concept_id into @child1_concept_id from concept_name where name ="Psychiatric care" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child2_concept_id from concept_name where name ="Legal aid" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child3_concept_id from concept_name where name ="Sexual and gender based violence (SGBV) services" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child4_concept_id from concept_name where name ="Social Welfare NGO" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child5_concept_id from concept_name where name ="Other medical facility" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            select concept_id into @child6_concept_id from concept_name where name ="Other" and concept_name_type ="FULLY_SPECIFIED" and locale ="en" and voided = 0;
            call add_concept_answer(@concept_id, @child1_concept_id, 1);
            call add_concept_answer(@concept_id, @child2_concept_id, 2);
            call add_concept_answer(@concept_id, @child3_concept_id, 3);
            call add_concept_answer(@concept_id, @child4_concept_id, 4);
            call add_concept_answer(@concept_id, @child5_concept_id, 5);
            call add_concept_answer(@concept_id, @child6_concept_id, 6);
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022755983" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_reference_term
                where code in
                ("163468","1763","167049","166832","159473","159673","159675","1560","166576","164352","159676","164438","159785","167060","159674","1713","167134","1540","167079","1712","167059","5675","135703","167061","163354","163123","159477","167048","159740","165591","162571","1538","167050","165095")
                and retired = 0
                and concept_source_id = (
                select concept_source_id from concept_reference_source where name = "CEIL"  and retired =0
                );
            </sqlCheck>
        </preConditions>
        <comment>Adding CEIL codes to concepts</comment>
        <sql>
            SELECT concept_source_id INTO @source_id FROM concept_reference_source where name = "CEIL";

            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"163468",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"1763",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"167049",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"166832",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"159473",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"159673",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"159675",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"1560",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"166576",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"164352",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"159676",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"164438",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"159785",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"167060",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"159674",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"1713",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"167134",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"1540",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"167079",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"1712",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"167059",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"5675",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"135703",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"167061",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"163354",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"163123",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"159477",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"167048",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"159740",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"165591",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"162571",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"1538",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"167050",@source_id,uuid(),now());
            INSERT INTO concept_reference_term (creator,code,concept_source_id,uuid,date_created) VALUES (1,"165095",@source_id,uuid(),now());
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Other referral outside MSF","162724");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Feeling down, depressed, or hopeless","167007");
            call CREATE_REFERENCE_MAPPING_CEIL("Psychiatric care","167061");
            call CREATE_REFERENCE_MAPPING_CEIL("0= Not at all","1670215");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Guardian understands patient's disease","167022");
            call CREATE_REFERENCE_MAPPING_CEIL("Gynaecological consultation","166832");
            call CREATE_REFERENCE_MAPPING_CEIL("Fisherman","159674");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Number of dependent children","5675");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Head of household occupation","159740");
            call CREATE_REFERENCE_MAPPING_CEIL("Lives at relatives/friends' place","167059");
            call CREATE_REFERENCE_MAPPING_CEIL("Employee","1540");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Patient understands their disease","167021");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Comment","161011");
            call CREATE_REFERENCE_MAPPING_CEIL("College/University","159785");
            call CREATE_REFERENCE_MAPPING_CEIL("OPD","160542");
            call CREATE_REFERENCE_MAPPING_CEIL("Primary school","1713");
            call CREATE_REFERENCE_MAPPING_CEIL("High school","163123");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Not being able to stop or control worrying","167005");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Format of consultation","160530");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, MSF Referral","1272");
            call CREATE_REFERENCE_MAPPING_CEIL("Phone call","166997");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Patient living condition","167134");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Relationship to head of household","163354");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Social Information- Comments","161011");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Living Situation- Comments","161011");
            call CREATE_REFERENCE_MAPPING_CEIL("Institution","135703");
            call CREATE_REFERENCE_MAPPING_CEIL("Other medical facility","164407");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Date recorded","162869");
            call CREATE_REFERENCE_MAPPING_CEIL("Land ownership","159477");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Other session location","1763");
            call CREATE_REFERENCE_MAPPING_CEIL("On the move","167060");
            call CREATE_REFERENCE_MAPPING_CEIL("Patient","162571");
            call CREATE_REFERENCE_MAPPING_CEIL("MSF OPD","160542");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, PHQ 4 score","166590");
            call CREATE_REFERENCE_MAPPING_CEIL("Unstable accommodation","167048");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Age of dependent","164438");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Age of children","164438");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Patient education level","1712");
            call CREATE_REFERENCE_MAPPING_CEIL("Farmer","1538");
            call CREATE_REFERENCE_MAPPING_CEIL("Home visit","1536");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Session location","161010");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Reason for referral","164359");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Important patient information to share with the medical team","165095");
            call CREATE_REFERENCE_MAPPING_CEIL("Social Welfare NGO","166576");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Follow-up planned","167079");
            call CREATE_REFERENCE_MAPPING_CEIL("Vegetable seller","159675");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Number of other dependents","164352");
            call CREATE_REFERENCE_MAPPING_CEIL("Stable accommodation","167049");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Other key figures in the household","1560");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Feeling nervous, anxious or on edge","167003");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Number of meals per day","165591");
            call CREATE_REFERENCE_MAPPING_CEIL("Charcoal seller","159676");
            call CREATE_REFERENCE_MAPPING_CEIL("Small business owner","159673");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Little interest or pleasure in doing things","167006");
            call CREATE_REFERENCE_MAPPING_CEIL("Husband","5617");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Next appointment date","5096");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Referral outside MSF","1272");
            call CREATE_REFERENCE_MAPPING_CEIL("MSA, Patient owns house","159473");
            call CREATE_REFERENCE_MAPPING_CEIL("Phone support","166997");
            call CREATE_REFERENCE_MAPPING_CEIL("Homeless","163468");
            call CREATE_REFERENCE_MAPPING_CEIL("IPD","167050");
            call CREATE_REFERENCE_MAPPING_CEIL("Child","1528");
            call CREATE_REFERENCE_MAPPING_CEIL("Other","5622");
        </sql>
    </changeSet>

    <changeSet id="Malawi_CONFIG_20220621022755996" author="Venky">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_reference_term
                where code in
                ("")
                and retired = 0
                and concept_source_id = (
                select concept_source_id from concept_reference_source where name = "MSFOCP"  and retired =0
                );
            </sqlCheck>
        </preConditions>
        <comment>Adding MSFOCP codes to concepts</comment>
        <sql>
            SELECT concept_source_id INTO @source_id FROM concept_reference_source where name = "MSFOCP";

        </sql>
    </changeSet>

</databaseChangeLog>
